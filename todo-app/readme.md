# Лабораторная работа № 1

## Цель работы

Понять базовую связку Express + MVC: контроллеры, роуты, представления.
Научиться обрабатывать формы (GET/POST), передавать данные в шаблоны и делать redirect после успешной отправки.
Реализовать минимальное приложение без БД с хранением данных в памяти процесса.

## express

npm install express
Это фреймворк для Node.js, который сильно упрощает создание веб-приложений.
Он даёт удобные инструменты для работы с HTTP-запросами и маршрутами.
Без Express пришлось бы писать всё через http.createServer, обрабатывать строки вручную и т.д.

## dotenv

npm install dotenv
Это библиотека для работы с переменными окружения (файл .env).
Позволяет хранить настройки отдельно от кода.

## .env

служебный файл с настройками окружения, расположен в корень проекта (там же, где package.json)

## Pug

npm install pug

## Функционал

- Просмотр списка задач
- Создание новой задачи
- Переключение статуса задачи (выполнена / не выполнена)
- Удаление задачи
- Просмотр задачи по ID
- Статическая страница "О нас"
- Обработка ошибок (страница 404)

## Основные маршруты

GET / — список задач
GET /new — форма добавления новой задачи
POST /new — создание задачи
GET /:id — просмотр задачи по ID
POST /:id/toggle — переключение статуса задачи
POST /:id/delete — удаление задачи
GET /about — страница "О нас"
Все остальные пути → страница 404

## Корень проекта

app.js — основной сервер Express, подключает все маршруты, контроллеры и представления.
.env — переменные окружения (например, порт, имя приложения, режим разработки).

## Pug-шаблоны (/views)

В папке views/ находятся все представления приложения, написанные на шаблонизаторе Pug.
layout.pug — базовый макет (header, footer, подключение CSS). Все страницы наследуют его.
index.pug — главная страница со списком задач.
new.pug — страница с формой добавления новой задачи.
about.pug — статическая страница "О нас".
404.pug — страница ошибки «Не найдено».

## Контроллеры (/controllers)

В папке хранится логика обработки запросов:
todoController.js — управление задачами (список, создание, переключение, удаление, поиск по ID).
aboutController.js — обработка статической страницы "О нас".
errorController.js — обработка ошибок, в том числе страницы 404.

## Модели (/models)

В папке — модели данных:
todo.js — модель задачи, хранение массива задач в памяти, операции над задачами (create, getAll, findById, toggle, deleteTask).

## Общий вид приложения

![alt text](image.png)

## Контрольные вопросы:

1. Чем отличаются HTML-маршруты от REST API?

HTML-маршруты возвращают готовые страницы (HTML), которые сразу отображаются в браузере.
REST API возвращает только данные (обычно в формате JSON), а внешний клиент (браузерный фронтенд, мобильное приложение, Postman) сам решает, как их показать.

2. Что такое res.render и res.json?

res.render используется для рендеринга страниц на основе шаблонов (например, Pug). Подходит, когда приложение само формирует HTML.
res.json используется для возврата данных в формате JSON. Применяется, когда сервер работает как API и клиенту нужны только данные.

3. Что такое middleware в Express и для чего используется express.urlencoded?

Middleware — это промежуточные функции, которые обрабатывают запрос до того, как он попадёт к конечному маршруту. Они могут выполнять разные задачи: логирование, проверку авторизации, парсинг данных, обработку ошибок.
express.urlencoded — это специальный middleware, который преобразует данные из HTML-формы в объект. Без него сервер не сможет прочитать значения, введённые пользователем в форму.
